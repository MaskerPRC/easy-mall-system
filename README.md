# é‚®ä»¶æœåŠ¡å™¨ç³»ç»Ÿ - å‰åç«¯åˆ†ç¦»ç‰ˆ

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„è‡ªå»ºé‚®ä»¶æœåŠ¡å™¨ç³»ç»Ÿï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæ”¯æŒSMTPå‘é€ã€IMAPæ¥æ”¶ä»¥åŠç°ä»£åŒ–Webç®¡ç†ç•Œé¢ã€‚

## ğŸš€ ç³»ç»Ÿæ¶æ„

### å‰åç«¯åˆ†ç¦»è®¾è®¡
```
easy-mail-system/
â”œâ”€â”€ backend/                # åç«¯APIæœåŠ¡ (Node.js + Express)
â”‚   â”œâ”€â”€ server.js          # ä¸»æœåŠ¡å™¨
â”‚   â”œâ”€â”€ database/          # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”œâ”€â”€ mail-server/       # SMTP/IMAPæœåŠ¡å™¨
â”‚   â”œâ”€â”€ routes/            # APIè·¯ç”±
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡æœåŠ¡
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”œâ”€â”€ admin/                 # å‰ç«¯ç®¡ç†ç•Œé¢ (Vue 3 + Vite)
â”‚   â”œâ”€â”€ src/              # Vueæºç 
â”‚   â”œâ”€â”€ public/           # é™æ€èµ„æº
â”‚   â””â”€â”€ dist/             # æ„å»ºäº§ç‰©
â”œâ”€â”€ data/                 # æ•°æ®åº“æ–‡ä»¶
â””â”€â”€ logs/                 # æ—¥å¿—æ–‡ä»¶
```

## ğŸŒŸ æŠ€æœ¯æ ˆ

### åç«¯ (Backend)
- **æ¡†æ¶**: Node.js + Express
- **æ•°æ®åº“**: SQLite
- **é‚®ä»¶æœåŠ¡**: smtp-server + mailparser
- **è®¤è¯**: Bearer Token
- **API**: RESTfulé£æ ¼

### å‰ç«¯ (Frontend)
- **æ¡†æ¶**: Vue 3 + Composition API
- **æ„å»ºå·¥å…·**: Vite
- **UIç»„ä»¶**: Element Plus
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±**: Vue Router 4

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 16.0.0
- npm >= 8.0.0

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <your-repo-url>
cd easy-mail-system
```

### 2. å®‰è£…ä¾èµ–
```bash
# å®‰è£…é¡¹ç›®ä¾èµ–å’Œå‰åç«¯ä¾èµ–
npm install
```

### 3. åˆå§‹åŒ–æ•°æ®åº“
```bash
npm run setup
```

### 4. å¯åŠ¨æœåŠ¡

**å¼€å‘æ¨¡å¼ (æ¨è)**
```bash
# åŒæ—¶å¯åŠ¨å‰åç«¯å¼€å‘æœåŠ¡å™¨
npm run dev
```
- åç«¯API: http://localhost:3000
- å‰ç«¯ç•Œé¢: http://localhost:5173

**ç”Ÿäº§æ¨¡å¼**
```bash
# æ„å»ºå‰ç«¯
npm run build

# å¯åŠ¨åç«¯æœåŠ¡
npm start
```

### 5. è®¿é—®ç®¡ç†ç•Œé¢
æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:5173

é»˜è®¤ç®¡ç†å‘˜ä»¤ç‰Œ: `your-secret-admin-token`

## ğŸ“‹ å¯ç”¨è„šæœ¬

### é¡¹ç›®çº§è„šæœ¬
```bash
npm run dev              # åŒæ—¶å¯åŠ¨å‰åç«¯å¼€å‘æœåŠ¡å™¨
npm start               # å¯åŠ¨åç«¯ç”Ÿäº§æœåŠ¡å™¨
npm run build           # æ„å»ºå‰ç«¯
npm run setup           # åˆå§‹åŒ–æ•°æ®åº“
npm run install:all     # å®‰è£…å‰åç«¯æ‰€æœ‰ä¾èµ–
```

### åç«¯è„šæœ¬
```bash
npm run backend:dev     # å¯åŠ¨åç«¯å¼€å‘æœåŠ¡å™¨
npm run backend:start   # å¯åŠ¨åç«¯ç”Ÿäº§æœåŠ¡å™¨
npm run backend:setup   # åˆå§‹åŒ–æ•°æ®åº“
```

### å‰ç«¯è„šæœ¬
```bash
npm run frontend:dev    # å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run frontend:build  # æ„å»ºå‰ç«¯
npm run frontend:preview # é¢„è§ˆæ„å»ºäº§ç‰©
```

## ğŸ”— å‰åç«¯é€šä¿¡

### APIæ¥å£è§„èŒƒ
- **Base URL**: `http://localhost:3000/api`
- **è®¤è¯æ–¹å¼**: `Authorization: Bearer <token>`
- **æ•°æ®æ ¼å¼**: JSON

### ä¸»è¦APIç«¯ç‚¹
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/health` | å¥åº·æ£€æŸ¥ |
| GET | `/api/admin/stats` | ç³»ç»Ÿç»Ÿè®¡ |
| GET | `/api/admin/domains` | åŸŸååˆ—è¡¨ |
| POST | `/api/admin/domains` | åˆ›å»ºåŸŸå |
| GET | `/api/admin/accounts` | é‚®ç®±è´¦æˆ· |
| POST | `/api/admin/accounts` | åˆ›å»ºè´¦æˆ· |
| GET | `/api/admin/emails` | é‚®ä»¶åˆ—è¡¨ |
| GET | `/api/admin/webhooks` | Webhooké…ç½® |

### è·¨åŸŸé…ç½®
åç«¯å·²é…ç½®CORSå…è®¸å‰ç«¯è®¿é—®:
```javascript
// å…è®¸çš„æ¥æº
origins: [
  'http://localhost:5173', // Vueå¼€å‘æœåŠ¡å™¨
  'http://localhost:3000'  // åŒæºè¯·æ±‚
]
```

## ğŸŒ åŠŸèƒ½æ¨¡å—

### 1. ä»ªè¡¨æ¿ ğŸ“Š
- ç³»ç»Ÿæ¦‚è§ˆå’Œç»Ÿè®¡ä¿¡æ¯
- æœåŠ¡çŠ¶æ€ç›‘æ§
- å¿«é€Ÿæ“ä½œå…¥å£

### 2. åŸŸåç®¡ç† ğŸŒ
- æ·»åŠ /ç¼–è¾‘/åˆ é™¤åŸŸå
- MXè®°å½•å’ŒSPFè®°å½•é…ç½®
- DNSé…ç½®æŒ‡å—

### 3. é‚®ç®±è´¦æˆ·ç®¡ç† ğŸ‘¤
- åˆ›å»º/ç¼–è¾‘/åˆ é™¤é‚®ç®±è´¦æˆ·
- å¯†ç ç®¡ç†å’Œé…é¢è®¾ç½®
- ç®¡ç†å‘˜æƒé™æ§åˆ¶

### 4. é‚®ä»¶ç®¡ç† ğŸ“§
- æŸ¥çœ‹é‚®ä»¶æ”¶å‘è®°å½•
- é‚®ä»¶æœç´¢å’Œç­›é€‰
- é‚®ä»¶è¯¦æƒ…æŸ¥çœ‹

### 5. Webhooké…ç½® ğŸ”—
- åˆ›å»ºå’Œç®¡ç†Webhook
- äº‹ä»¶è§¦å‘é…ç½®
- æ‰§è¡Œæ—¥å¿—ç›‘æ§

### 6. ç³»ç»Ÿè®¾ç½® âš™ï¸
- DNSé…ç½®æŒ‡å—
- æœåŠ¡å™¨çŠ¶æ€æŸ¥çœ‹
- APIä»¤ç‰Œç®¡ç†

## ğŸ”§ éƒ¨ç½²

### å¼€å‘ç¯å¢ƒ
1. å¯åŠ¨åç«¯: `npm run backend:dev`
2. å¯åŠ¨å‰ç«¯: `npm run frontend:dev`
3. è®¿é—®: http://localhost:5173

### ç”Ÿäº§ç¯å¢ƒ
1. æ„å»ºå‰ç«¯: `npm run build`
2. å¯åŠ¨åç«¯: `npm start`
3. é…ç½®Nginxä»£ç†å‰ç«¯é™æ€æ–‡ä»¶

### Nginxé…ç½®ç¤ºä¾‹
```nginx
server {
    listen 80;
    server_name mail.yourdomain.com;
    
    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /path/to/easy-mail-system/admin/dist;
        try_files $uri $uri/ /index.html;
    }
    
    # åç«¯APIä»£ç†
    location /api {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## ğŸ›¡ï¸ å®‰å…¨é…ç½®

### è®¤è¯æœºåˆ¶
- ä½¿ç”¨Bearer Tokenè®¤è¯
- æ‰€æœ‰ç®¡ç†APIéœ€è¦è®¤è¯
- å‰ç«¯è‡ªåŠ¨å¤„ç†tokenå­˜å‚¨å’Œåˆ·æ–°

### CORSç­–ç•¥
- ä¸¥æ ¼é™åˆ¶å…è®¸çš„æ¥æº
- æ”¯æŒå‡­æ®ä¼ é€’
- é¢„æ£€è¯·æ±‚å¤„ç†

### é€Ÿç‡é™åˆ¶
- APIè¯·æ±‚é¢‘ç‡é™åˆ¶
- é˜²æ­¢æš´åŠ›æ”»å‡»
- å¯é…ç½®çš„é™åˆ¶ç­–ç•¥

## ğŸ“– å¼€å‘æŒ‡å—

### åç«¯å¼€å‘
1. è¿›å…¥backendç›®å½•: `cd backend`
2. ä¿®æ”¹ä»£ç åè‡ªåŠ¨é‡å¯: `npm run dev`
3. æ·»åŠ æ–°APIè·¯ç”±: `routes/` ç›®å½•
4. æ•°æ®åº“æ“ä½œ: `database/` ç›®å½•

### å‰ç«¯å¼€å‘
1. è¿›å…¥adminç›®å½•: `cd admin`
2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨: `npm run dev`
3. æ·»åŠ æ–°é¡µé¢: `src/views/` ç›®å½•
4. APIè°ƒç”¨: `src/services/api.js`

### æ·»åŠ æ–°åŠŸèƒ½
1. **åç«¯**: åœ¨ `backend/routes/` æ·»åŠ APIè·¯ç”±
2. **å‰ç«¯**: åœ¨ `admin/src/` æ·»åŠ å¯¹åº”é¡µé¢å’Œé€»è¾‘
3. **API**: æ›´æ–° `admin/src/services/api.js`
4. **è·¯ç”±**: æ›´æ–° `admin/src/router/index.js`

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**ç«¯å£å†²çª**
- åç«¯ç«¯å£: 3000
- å‰ç«¯ç«¯å£: 5173
- SMTPç«¯å£: 25
- IMAPç«¯å£: 143

**APIè¿æ¥å¤±è´¥**
1. æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨
2. æ£€æŸ¥CORSé…ç½®
3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

**å‰ç«¯æ„å»ºå¤±è´¥**
1. æ£€æŸ¥Node.jsç‰ˆæœ¬ (>=16.0.0)
2. æ¸…é™¤node_modulesé‡æ–°å®‰è£…
3. æ£€æŸ¥ä¾èµ–ç‰ˆæœ¬å…¼å®¹æ€§

### æ—¥å¿—æŸ¥çœ‹
```bash
# åç«¯æ—¥å¿—
tail -f logs/server.log

# å‰ç«¯å¼€å‘æ—¥å¿—
# åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­æŸ¥çœ‹
```

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0.0 (å‰åç«¯åˆ†ç¦»ç‰ˆ)
- âœ¨ å…¨æ–°å‰åç«¯åˆ†ç¦»æ¶æ„
- ğŸ¨ Vue 3 + Viteç°ä»£åŒ–å‰ç«¯
- âš¡ å¤§å¹…æå‡å¼€å‘ä½“éªŒ
- ğŸ”§ å®Œå–„çš„APIæ¥å£è®¾è®¡
- ğŸ“± å“åº”å¼ç§»åŠ¨ç«¯é€‚é…

### v1.0.0
- ğŸ‰ åˆå§‹ç‰ˆæœ¬
- âœ… åŸºç¡€é‚®ä»¶æœåŠ¡å™¨åŠŸèƒ½
- ğŸ“§ é›†æˆå¼Webç®¡ç†ç•Œé¢

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

---

**ğŸ”¥ æ¨èä½¿ç”¨æ–¹å¼**: å¼€å‘æ—¶ä½¿ç”¨ `npm run dev` åŒæ—¶å¯åŠ¨å‰åç«¯ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨Nginxä»£ç†å‰ç«¯å¹¶åå‘ä»£ç†åç«¯APIã€‚ 